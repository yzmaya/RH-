<!DOCTYPE html>
<html>
<head>
  <title>Gestión de Usuarios</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://www.gstatic.com/firebasejs/5.5.1/firebase.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="css/tablas.css" media="all">

</head>
<body data-spy="scroll" data-target=".navbar" data-offset="50">

<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>                        
      </button>
      <a class="navbar-brand nav nav-pills" data-toggle="pill" href="#home">Usuarios</a>
      

    </div>
    <div>
      <div class="collapse navbar-collapse" id="myNavbar">
        <ul class="nav navbar-nav nav nav-pills">
          <li><a data-toggle="pill" href="#menu1">Forma de Incidencia</a></li>

         
         

        </ul>
      <ul class="nav navbar-nav navbar-right">
        <li id="btnLogout"><a href="#"><span class="glyphicon glyphicon-user"></span> Cerrar Sesión</a></li>
      </ul>
      </div>
    </div>
  </div>
</nav>    



<div class="container">
  
  <br><br>
  
  <br><br>

  
  <div class="tab-content">
    <div id="home" class="tab-pane fade in active">
      <!-- aqui empieza el tab 1-->
      <br>
      <input type="text" name="" id="filtrar" class="form-control" placeholder="Buscar...">   
      <br>                                                                                 
  <div class="table-responsive"> 

  <table class="table table-hover" class="table-responsive" id="myTable">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Puesto</th>  
        <th>Horario</th>    
      </tr>
    </thead>
    <tbody id="lista" class="buscar"  style="cursor: pointer;">
    </tbody>
  </table>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Registro <p style="display: none;" id="keyon"></p></h4>
         
        </div>
        <div class="modal-body">

          <table >
            <tbody id="lista2"></tbody>
          </table>
          <br>
          <form class="form-horizontal">
            <div class="form-group">
              <label class="control-label col-sm-2" for="email">A-Paterno:</label>
              <div class="col-sm-10">
                <input type="text" class="form-control" id="nameform" onkeyup="activa()">
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-2" for="pwd">A-Materno:</label>
              <div class="col-sm-10">          
                <input type="text" class="form-control" id="nameform2"  onkeyup="activa()">
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-2" for="pwd">Nombre(s):</label>
              <div class="col-sm-10">          
                <input type="text" class="form-control" id="nameform3"  onkeyup="activa()">
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-2" for="pwd">RFC:</label>
              <div class="col-sm-10">          
                <input type="text" class="form-control" id="nameform4"  onkeyup="activa()">
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-2" for="pwd">CURP:</label>
              <div class="col-sm-10">          
                <input type="text" class="form-control" id="nameform5"  onkeyup="activa()">
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-2" for="pwd">ID:</label>
              <div class="col-sm-10">          
                <input type="text" class="form-control" id="nameform6"  onkeyup="activa()">
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-2" for="pwd">Horario:</label>
              <div class="col-sm-10">          
                <input type="text" class="form-control" id="nameform7"  onkeyup="activa()">
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-2" for="pwd">Adscripción:</label>
              <div class="col-sm-10">          
                <input type="text" class="form-control" id="nameform8"  onkeyup="activa()">
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-2" for="pwd">Puesto:</label>
              <div class="col-sm-10">          
                <input type="text" class="form-control" id="nameform9"  onkeyup="activa()">
              </div>
            </div>
            <div class="form-group">
              <label class="control-label col-sm-2" for="pwd">Nombramiento:</label>
              <div class="col-sm-10">          
                <input type="text" class="form-control" id="nameform10"  onkeyup="activa()">
              </div>
            </div>   
          </form>
        </div>
        <div class="modal-footer">
      <!--    data-toggle="pill" -->
          <span id="notif" style="color: green; display: none;" >Cambio realizado exitosamente!</span>
          <button type="button" class="btn btn-success" id="modifica" disabled="" onclick="guarda();">Modificar</button>
          <button type="button" class="btn btn-info" data-dismiss="modal" href="#menu1" data-toggle="pill">Forma Única</button>
        </div>
      </div>
      
    </div>
  </div>

    </div>
    <div id="menu1" class="tab-pane fade">
      <br><br>
      <div id="areaImprimir" align="center" class="container">
          <!-- datos generales -->
          <table class="table table-bordered centro">
            <tr>
              <td><img src="img/logo.png"></td>
              <td align="center">
                <strong>Forma Única de Incidencias de Personal </strong>
                <table border="1">
                <tr class="color">
                  <td colspan="3"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fecha de Elaboración&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
                </tr>
                <tr align="center">
                  <td>Día</td>
                  <td>Mes</td>
                  <td>Año</td>
                </tr>
                <tr align="center">
                  <script>
                  var f = new Date();
                  document.write("<td>" + f.getDate() + "</td><td>" + (f.getMonth() +1) + "</td><td>" + f.getFullYear() + "</td>");
                  </script> 
                </tr>
              </table>
              </td>
              <td>Subsecretaría de Educación Media Superior.</td>
            </tr>
            
          </table>

          <table class="table table-bordered menos">
            <tr>
              <th>Apellido Paterno</th>
              <th>Apellido Materno</th>
              <th>Nombre(s)</th>
            </tr>
            <tr>
              <td id="apat"></td>
              <td id="amat"></td>
              <td id="names"></td>
            </tr>
            <tr>
              <th>RFC</th>
              <th>CURP</th>
              <th>Número de Tarjeta</th>
            </tr>
            <tr>
              <td id="rfc"></td>
              <td id="curp"></td>
              <td id="no-card"></td>
            </tr>
            <tr>
              <th>Horario</th>
              <th colspan="2">Área de Adscripción</th>

            </tr>
            <tr>
              <td  id="hour"></td>
              <td  colspan="2" id="a-ads"></td>
            </tr>
            <tr>
              <th colspan="2">Puesto</th>
              <th>Tipo de Nombramiento</th>
            </tr>
            <tr>
              <td  colspan="2" id="puesto"></td>
              <td  id="type-nom"></td>
            </tr>
            <tr>
              <th>Solcita Justificación de los Días:</th>
              <td  colspan="2"><input type="text" class="form-control" name=""></td>
            </tr>
            
          </table>
           <!-- aqui termina la tabla de datos personales-->
           <!-- aqui empieza la tabla de checkboxes -->
          <table class="table table-bordered menos">
            <tr class="color">
              <td><strong>Turno Matutino</strong></td>
              <td><strong>Turno_Vespertino</strong></td>
              <td colspan="2"><strong>Motivos</strong></td>
            </tr>
            <tr>
              <td>
                  <label class="radio-inline">
                    <input type="radio" name="a-panelcheck">Entrada
                  </label><br>
                  <label class="radio-inline">
                    <input type="radio" name="a-panelcheck">Salida
                  </label><br>
                  <label class="radio-inline">
                    <input type="radio" name="a-panelcheck">Retardo "A"
                  </label>
                  <br>
                  <label class="radio-inline">
                    <input type="radio" name="a-panelcheck">Retardo "B"
                  </label><br>
                  <label class="radio-inline">
                    <input type="radio" name="a-panelcheck">Entrada/Salida
                  </label><br>
                  <label class="radio-inline">
                    <input type="radio" name="a-panelcheck">Faltas(s)
                  </label>
              </td>
               <td>
                  <label class="radio-inline">
                    <input type="radio" name="b-panelcheck">Entrada
                  </label><br>
                  <label class="radio-inline">
                    <input type="radio" name="b-panelcheck">Salida
                  </label><br>
                  <label class="radio-inline">
                    <input type="radio" name="b-panelcheck">Retardo "A"
                  </label>
                  <br>
                  <label class="radio-inline">
                    <input type="radio" name="b-panelcheck">Retardo "B"
                  </label><br>
                  <label class="radio-inline">
                    <input type="radio" name="b-panelcheck">Entrada/Salida
                  </label><br>
                  <label class="radio-inline">
                    <input type="radio" name="b-panelcheck">Faltas(s)
                  </label>
              </td>
               <td>
                  <label class="radio-inline">
                    <input type="radio" name="c-panelcheck">Comisión
                  </label><br>
                  <label class="radio-inline">
                    <input type="radio" name="c-panelcheck">Cuidados Maternos<strong style="color: red;" >*</strong> 
                  </label><br>
                  <label class="radio-inline">
                    <input type="radio" name="c-panelcheck">Personal
                  </label>
                  <br>
                  <label class="radio-inline">
                    <input type="radio" name="c-panelcheck">Permiso Económico
                  </label><br>
                  <label class="radio-inline">
                    <input type="radio" name="c-panelcheck">Omisión
                  </label><br>
                  <label class="radio-inline">
                    <input type="radio" name="c-panelcheck">Constancia Médica<strong style="color: red;" >*</strong> 
                  </label>
              </td>
              <td>
                  <label class="radio-inline">
                    <input type="radio" name="c-panelcheck">Licencia Médica<strong style="color: red;" >*</strong> 
                  </label><br>
                  <label class="radio-inline">
                    <input type="radio" name="c-panelcheck">Cursos de Capacitación<strong style="color: red;" >*</strong> 
                  </label>
                  <br>
                  <label class="radio-inline">
                    <input type="radio" name="c-panelcheck">Vacaciones 1 Periodo 2016
                  </label>
                  <br>
                  <label class="radio-inline">
                    <input type="radio" name="c-panelcheck">Días Adeudados al 1er Periodo 2016
                  </label>
                  <br>
                  <label class="radio-inline">
                    <input type="radio" name="c-panelcheck">Vacaciones 2 Periodo de 2016
                  </label>
                  <br>
                  <label class="radio-inline">
                    <input type="radio" name="c-panelcheck">Días adeudados al 2do. Periodo 2016
                  </label>
              </td>
            </tr>
          </table>
          <!-- aqui termina la tabla de los chekboxes-->
           <!-- aqui empieza la tabla de firmas -->
           <table class="table table-bordered menos">
             <tr style="background-color: yellow;">
               <td colspan="2" align="right" ><strong>Días Económicos Otorgados Enero/Diciembre
                <br>( ) Firma de Validación</strong> ____________________
                <p style="color: red;">(Exclusivo del área de Control de Asistencia)</p>
               </td>
               <td>
                 Fecha del último día Otorgado<br>
                 <input type="text"  style="width: 65px;"><input type="text" style="width: 65px;"><input type="text" style="width: 65px;"><br>
                 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Día&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Mes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Año
               </td>
             </tr>
             <tr>
               <td style="width: 33.33%;"><br><br><br></td>
               <td style="width: 33.33%;"><br><br><br></td>
               <td style="width: 33.33%;"><br><br><br></td>
             </tr>
             <tr>
               <th class="centro">Interesado</th>
               <th class="centro">Autoriza</th>
               <th class="centro">Vo. Bo.</th>
             </tr>
             <tr>
               <td><strong style="color: red;" >* </strong> Favor de Integrar la documentación que compruebe el trámite solicitado.</td>
               <td><br><br><br></td>
               <td></td>
             </tr>
             <tr>
               <td></td>
               <td class="centro"><strong>SELLO Y FIRMA DE RECIBIDO<br>ÁREA DE RECURSOS HUMANOS</strong></td>
             </tr>
           </table>


      </div>
      
     &nbsp;&nbsp;&nbsp; <button type="button" class="btn btn-success" data-dismiss="modal" onclick="printDiv('areaImprimir')" value="imprimir div" >Imprimir forma</button>
          
    </div>
  </div>

</div>

<script type="text/javascript" src="js/sesion.js"></script>
<script type="text/javascript">


function activa(){
  $('#modifica').attr('disabled', false);
}

function guarda(){

  var id = document.getElementById("keyon").innerHTML;
  var campo1 = $('#nameform').val();
  var campo2 = $('#nameform2').val();
  var campo3 = $('#nameform3').val();
  var campo4 = $('#nameform4').val();
  var campo5 = $('#nameform5').val();
  var campo6 = $('#nameform6').val();
  var campo7 = $('#nameform7').val();
  var campo8 = $('#nameform8').val();
  var campo9 = $('#nameform9').val();
  var campo10 = $('#nameform10').val();

$('#notif').show();


  var guardado = firebase.database().ref('/meta' + '/' + id);
    //se agregan los datos
   guardado.update({
    APELLIDO_PATERNO: campo1,
    APELLIDO_MATERNO: campo2,
    NOMBRE: campo3,
    RFC: campo4,
    CURP: campo5,
    ID: campo6,
    HORARIO: campo7,
    AEA_DE_ADSCRIPCION: campo8,
    DENOMINACION: campo9,
    TIPO_DE_NOMBRAMIENTO: campo10



      
  });



};






  function printDiv(nombreDiv) {
     var contenido= document.getElementById(nombreDiv).innerHTML;
     var contenidoOriginal= document.body.innerHTML;

     document.body.innerHTML = contenido;

     window.print();

     document.body.innerHTML = contenidoOriginal;
}


   $(document).ready(function () {


        $('#print_btn').click(function () {
         
          $('#imprime').printThis();
        });
      });


  function enableSending(sstring){
    $('#notif').hide();
  var externo = sstring;
  document.getElementById("keyon").innerHTML = externo;

  firebase.database().ref('/meta' + '/' + sstring).on('value', function(snapshot) {

$('#nameform').val(snapshot.val().APELLIDO_PATERNO);
$('#nameform2').val(snapshot.val().APELLIDO_MATERNO);
$('#nameform3').val(snapshot.val().NOMBRE);
$('#nameform4').val(snapshot.val().RFC);
$('#nameform5').val(snapshot.val().CURP);
$('#nameform6').val(snapshot.val().ID);
$('#nameform7').val(snapshot.val().HORARIO);
$('#nameform8').val(snapshot.val().AEA_DE_ADSCRIPCION);
$('#nameform9').val(snapshot.val().DENOMINACION);
$('#nameform10').val(snapshot.val().TIPO_DE_NOMBRAMIENTO);



localStorage.setItem("iNombre", snapshot.val().NOMBRE); 
document.getElementById("names").innerHTML = localStorage.getItem("iNombre");

localStorage.setItem("iApat", snapshot.val().APELLIDO_PATERNO); 
document.getElementById("apat").innerHTML = localStorage.getItem("iApat");

localStorage.setItem("iAmat", snapshot.val().APELLIDO_MATERNO); 
document.getElementById("amat").innerHTML = localStorage.getItem("iAmat");

localStorage.setItem("iRfc", snapshot.val().RFC); 
document.getElementById("rfc").innerHTML = localStorage.getItem("iRfc");

localStorage.setItem("iCurp", snapshot.val().CURP); 
document.getElementById("curp").innerHTML = localStorage.getItem("iCurp");

localStorage.setItem("iId", snapshot.val().ID); 
document.getElementById("no-card").innerHTML = localStorage.getItem("iId");

localStorage.setItem("iHour", snapshot.val().HORARIO); 
document.getElementById("hour").innerHTML = localStorage.getItem("iHour");

localStorage.setItem("iAds", snapshot.val().AEA_DE_ADSCRIPCION); 
document.getElementById("a-ads").innerHTML = localStorage.getItem("iAds");

localStorage.setItem("iPuesto", snapshot.val().DENOMINACION); 
document.getElementById("puesto").innerHTML = localStorage.getItem("iPuesto");

localStorage.setItem("iTyoep", snapshot.val().TIPO_DE_NOMBRAMIENTO); 
document.getElementById("type-nom").innerHTML = localStorage.getItem("iTyoep");





})

};





</script>
</body>
</html>
